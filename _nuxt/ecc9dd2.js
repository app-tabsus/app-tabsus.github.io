(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1037:function(t,e,n){"use strict";n.r(e);n(26),n(17),n(184),n(87),n(45),n(110),n(164),n(198),n(86);var r=n(5),o=(n(93),n(117),n(68),n(28),n(153),n(817)),l=n.n(o),c=n(8);function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d={props:{dataMapCharts:{type:Array,default:function(){return[]}},map:{type:Object,default:null}},data:function(){return{featuresChart:[],styleCache:[],id:316,colors:c.a.palette.field,legendControl:null}},fetch:function(){return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},watch:{dataMapCharts:function(t){this.setDataMap(t)},map:function(t){},featuresChart:function(t){t.length>0?this.addControltMap():this.removeControltMap()}},created:function(){},methods:{setDataMap:function(t){this.featuresChart=[];var e,n=[],r=f(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push({type:"Feature",id:Number(o.munic_mov),geometry:{type:"Point",coordinates:[Number(o.longitude),Number(o.latitude)]},name:o.name,data:[o.resident,o.non_resident],sum:o.total,properties:{name:o.name,data:[o.resident,o.non_resident],sum:o.total}})}}catch(t){r.e(t)}finally{r.f()}this.featuresChart=[].concat(n)},getStyleChart:function(){var t=this;return function(e,n){var r,o=[],c=f(t.colors);try{for(c.s();!(r=c.n()).done;){var h=r.value;o.push(l()(h,.9))}}catch(t){c.e(t)}finally{c.f()}var d="pie-classic-".concat(n?"1-":"").concat(e.get("data")),style=t.styleCache[d];if(!style){var m=15,data=e.get("data");if(m*=n?1.2:1,style=[new t.$ol.Style({image:new t.$olExt.StyleChart({type:"pie3D",radius:m,data:data,colors:o,rotateWithView:!0,stroke:new t.$ol.Stroke({color:"#fff",width:2})})})],n)for(var y=e.get("sum"),s=0,i=0;i<data.length;i++){var v=data[i],a=(2*s+v)/y*Math.PI-Math.PI/2,w=Math.round(v/y*1e3);w>0&&style.push(new t.$ol.Style({text:new t.$ol.Text({text:w/10+"%",font:"12px Calibri,sans-serif",offsetX:Math.cos(a)*(m+3),offsetY:Math.sin(a)*(m+3),textAlign:a<Math.PI/2?"left":"right",textBaseline:"middle",stroke:new t.$ol.Stroke({color:"#fff",width:2.5}),fill:new t.$ol.Fill({color:"#000"})})})),s+=v}}return t.styleCache[d]=style,style}},addControltMap:function(){var legend=new this.$olExt.Legend({title:"Gráfico",margin:5});null!=this.legendControl&&this.map.removeControl(this.legendControl),this.legendControl=new this.$olExt.LegendControl({legend:legend,collapsed:!1,className:"ol-legend ol-legend-top"}),this.map.addControl(this.legendControl),legend.addItem({title:"Residente",typeGeom:"Point",style:new this.$ol.Style({image:new this.$ol.RegularShape({points:4,radius:15,angle:Math.PI/4,stroke:new this.$ol.Stroke({color:l()("#ba68c8",.1),width:1}),fill:new this.$ol.Fill({color:l()(this.colors[0],.9)})})})}),legend.addItem({title:"Não Residente",typeGeom:"Point",style:new this.$ol.Style({image:new this.$ol.RegularShape({points:4,radius:15,angle:Math.PI/4,stroke:new this.$ol.Stroke({color:l()("#ba68c8",.1),width:1}),fill:new this.$ol.Fill({color:l()(this.colors[1],.9)})})})})},removeControltMap:function(){null!=this.legendControl&&(this.map.removeControl(this.legendControl),this.legendControl=null)}}},m=(n(987),n(195)),component=Object(m.a)(d,(function(){var t=this,e=t._self._c;return e("vl-layer-vector",[e("vl-source-vector",{ref:"featuresChart",attrs:{features:t.featuresChart},on:{"update:features":function(e){t.featuresChart=e}}},[e("vl-style-func",{attrs:{factory:t.getStyleChart}})],1)],1)}),[],!1,null,null,null);e.default=component.exports},817:function(t,e,n){"use strict";n(26),n(93),n(339);var r=function(t){return parseInt(t,16)},o=function(t,e){var n,r=t.r,g=t.g,b=t.b,o=t.a,a=(n=e,!isNaN(parseFloat(n))&&isFinite(n)?e:o);return"rgba(".concat(r,", ").concat(g,", ").concat(b,", ").concat(a,")")};t.exports=function(t,a){var e,n,l=function(t){return"#"===t.charAt(0)?t.slice(1):t}(t),c=function(t){var e=t.r,g=t.g,b=t.b,a=t.a;return{r:r(e),g:r(g),b:r(b),a:+(r(a)/255).toFixed(2)}}({r:(n=3===(e=l).length||4===e.length)?"".concat(e.slice(0,1)).concat(e.slice(0,1)):e.slice(0,2),g:n?"".concat(e.slice(1,2)).concat(e.slice(1,2)):e.slice(2,4),b:n?"".concat(e.slice(2,3)).concat(e.slice(2,3)):e.slice(4,6),a:(n?"".concat(e.slice(3,4)).concat(e.slice(3,4)):e.slice(6,8))||"ff"});return o(c,a)}},934:function(t,e,n){var content=n(988);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(141).default)("736f7f42",content,!0,{sourceMap:!1})},987:function(t,e,n){"use strict";n(934)},988:function(t,e,n){var r=n(140)((function(i){return i[1]}));r.push([t.i,".ol-control.ol-legend-top{top:4.5em;bottom:auto;left:.5em;z-index:1;max-height:90%;max-width:90%;overflow-x:hidden;overflow-y:auto}",""]),r.locals={},t.exports=r}}]);