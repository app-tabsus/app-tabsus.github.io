(window.webpackJsonp=window.webpackJsonp||[]).push([[1,10,15,40,42],{1011:function(t,e,n){"use strict";n.r(e);n(93);var r={name:"LoadDatasets",data:function(){return{source:"",system:"",initial:"",headers:["id","Ano","Fonte","Cor","Update"],columns:["id","year","source","color","updated_at"],urlBase:""}},create:function(){},computed:{loggedIn:function(){return this.$store.state.auth.loggedIn},isSuperuser:function(){return!!this.$store.state.auth.user.is_superuser}},beforeMount:function(){this.source=this.$route.params.source,this.system=this.$route.params.system,this.initial=this.$route.params.initial,this.urlBase="v1/dataset/".concat(this.source,"/").concat(this.system,"/").concat(this.initial)},mounted:function(){},methods:{upload:function(){this.$refs.table.getRows()}}},o=n(195),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"grid grid-cols-1 gap-1 lg:grid-cols-2 lg:gap-2"},[e("UploadFile",{attrs:{resource:"dataset",source:t.source,system:t.system,initial:t.initial},on:{upload:t.upload}}),t._v(" "),e("Table",{ref:"table",attrs:{headers:t.headers,columns:t.columns,"url-base":t.urlBase}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UploadFile:n(941).default,Table:n(813).default})},810:function(t,e,n){var content=n(827);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(141).default)("49ca9d96",content,!0,{sourceMap:!1})},813:function(t,e,n){"use strict";n.r(e);n(45),n(338),n(142),n(154);var r=n(5),o=n(70),l=(n(153),n(93),n(8)),c={name:"TableComponent",auth:!1,props:{headers:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},keyColumns:{type:String,default:"id"},urlBase:{type:String,default:""}},data:function(){return{rows:[],perPage:5,currentPage:1,totalRows:0,search:"",perPageOptions:[5,10,50,100],dateColumns:["created_at","updated_at"],grid:{display:"grid","grid-template-columns":"repeat(4, 1fr)","overflow-y":"auto",height:"250px"},iconColor:{width:"28px",height:"28px"},swatches:[].concat(Object(o.a)(l.a.palette.metro),Object(o.a)(l.a.palette.field),Object(o.a)(l.a.palette.nights),Object(o.a)(l.a.palette.pastels),Object(o.a)(l.a.palette.brewer1),Object(o.a)(l.a.palette.brewer2))}},computed:{url:function(){return"".concat(this.urlBase).concat(this.genPage()).concat(this.genSearch())}},mounted:function(){this.getRows()},methods:{genPage:function(){return"?per_page=".concat(this.perPage,"&page=").concat(this.currentPage)},genSearch:function(){return this.search.length>3?"&search=".concat(this.search):""},setPage:function(t){this.currentPage=t,this.getRows()},getRows:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get(t.url);case 2:return n=e.sent,e.next=5,n.data.data;case 5:return t.rows=e.sent,e.next=8,n.data.total;case 8:t.totalRows=e.sent;case 9:case"end":return e.stop()}}),e)})))()},changeColor:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.$axios.patch("".concat(n.urlBase,"/").concat(e),{color:t},{timeout:9999999});case 3:n.$toast.success("Cor alterada",{timeout:3e4}),r.next=12;break;case 6:return r.prev=6,r.t0=r.catch(0),n.$toast.error("Desculpe não foi possivel alterada cor",{timeout:3e4}),r.next=11,r.t0.response;case 11:return r.abrupt("return",r.sent);case 12:case"end":return r.stop()}}),r,null,[[0,6]])})))()}}},d=(n(826),n(195)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card shadow-lg compact side bg-base-100 my-1"},[e("div",{staticClass:"p-1 flex justify-end"},[t._v("\n    "+t._s(t.search)+"\n    "),e("div",{staticClass:"form-control"},[e("label",{staticClass:"input-group input-group-md"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"input input-bordered input-md",attrs:{type:"text"},domProps:{value:t.search},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getRows.apply(null,arguments)},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),e("span",[e("a",{on:{click:t.getRows}},[e("fa-icon",{attrs:{icon:"magnifying-glass"}})],1)])])])]),t._v(" "),e("div",{staticClass:"overflow-x-auto"},[e("table",{staticClass:"table w-full table-zebra"},[e("thead",[e("tr",[t._l(t.headers,(function(n,r){return e("th",{key:r},[t._v(t._s(n))])})),t._v(" "),e("th",[t._v("Ações")])],2)]),t._v(" "),e("tbody",t._l(t.rows,(function(n){return e("tr",{key:n[t.keyColumns]},[t._l(t.columns,(function(r,o){return e("td",{key:o},[t.dateColumns.includes(r)?e("div",[t._v("\n              "+t._s(t._f("formatDate")(n[r]))+"\n            ")]):"color"==r?e("div",[e("v-swatches",{attrs:{"wrapper-style":t.grid,"swatch-style":t.iconColor,"trigger-style":t.iconColor,swatches:t.swatches},on:{input:function(e){return t.changeColor(e,n[t.keyColumns])}},model:{value:n[r],callback:function(e){t.$set(n,r,e)},expression:"row[column]"}})],1):e("div",[t._v("\n              "+t._s(n[r])+"\n            ")])])})),t._v(" "),e("td",[e("ModalDelete",{attrs:{id:n[t.keyColumns],url:t.urlBase},on:{delete:t.getRows}})],1)],2)})),0)]),t._v(" "),e("div",{staticClass:"p-1 flex justify-end"},[e("Pagination",{attrs:{"per-page":t.perPage,value:t.currentPage,total:t.totalRows},on:{"update:perPage":function(e){t.perPage=e},"update:per-page":function(e){t.perPage=e},"update:value":function(e){t.currentPage=e},input:t.setPage}})],1)])])}),[],!1,null,"5be89f54",null);e.default=component.exports;installComponents(component,{ModalDelete:n(822).default,Table:n(813).default,Pagination:n(814).default})},814:function(t,e,n){"use strict";n.r(e);n(117);var r={name:"PaginationComponent",props:{noArrows:Boolean,pageCount:{type:Number,default:0},perPage:{type:Number,default:10},total:{type:Number,default:0},value:{type:Number,default:1}},data:function(){return{defaultPagesToDisplay:5}},computed:{totalPages:function(){return this.pageCount>0?this.pageCount:this.total>0?Math.ceil(this.total/this.perPage):1},pagesToDisplay:function(){return this.totalPages>0&&this.totalPages<this.defaultPagesToDisplay?this.totalPages:this.defaultPagesToDisplay},minPage:function(){if(this.value>=this.pagesToDisplay){var t=Math.floor(this.pagesToDisplay/2);return t+this.value>this.totalPages?this.totalPages-this.pagesToDisplay+1:this.value-t}return 1},maxPage:function(){if(this.value>=this.pagesToDisplay){var t=Math.floor(this.pagesToDisplay/2)+this.value;return t<this.totalPages?t:this.totalPages}return this.pagesToDisplay}},watch:{perPage:function(){},total:function(){}},methods:{range:function(t,e){for(var n=[],i=t;i<=e;i++)n.push(i);return n},changePage:function(t){this.$emit("input",t)},nextPage:function(){this.value<this.totalPages&&this.$emit("input",this.value+1)},prevPage:function(){this.value>1&&this.$emit("input",this.value-1)}}},o=n(195),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn",class:{disabled:1===t.value,"no-arrows":1===t.value},on:{click:t.prevPage}},[t._v("\n    «\n  ")]),t._v(" "),t._l(t.range(t.minPage,t.maxPage),(function(n){return e("button",{key:n,staticClass:"btn",class:{"btn-active":t.value===n},on:{click:function(e){return t.changePage(n)}}},[t._v("\n    "+t._s(n)+"\n  ")])})),t._v(" "),e("button",{staticClass:"btn",class:{disabled:t.value===t.totalPages,"no-arrows":t.value===t.totalPages},on:{click:t.nextPage}},[t._v("\n    »\n  ")])],2)}),[],!1,null,null,null);e.default=component.exports},822:function(t,e,n){"use strict";n.r(e);n(117),n(93);var r={name:"ModalDelete",props:{url:{type:String,required:!0},id:{type:Number,required:!0}},data:function(){return{showModal:!1}},methods:{destroy:function(){var t=this;this.$axios.delete("".concat(this.url,"/").concat(this.id)).then((function(e){t.$toast.success("Dateset apagado",{timeout:3e4}),console.log(e)})).catch((function(e){t.$toast.success("Não consegui apagar",{timeout:3e4}),console.error(e)})),this.showModal=!1,this.$emit("delete")}}},o=n(195),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("a",{staticClass:"btn btn-error btn-outline btn-circle btn-sm",on:{click:function(e){t.showModal=!t.showModal}}},[e("fa-icon",{attrs:{icon:["far","trash-alt"]}})],1),t._v(" "),e("div",{staticClass:"modal",class:{"modal-open":t.showModal}},[e("div",{staticClass:"modal-box"},[t._t("default"),t._v(" "),e("p",[t._v("Tem Certeza?")]),t._v(" "),e("div",{staticClass:"modal-action"},[e("a",{staticClass:"btn btn-warning",on:{click:t.destroy}},[t._v("Sim")]),t._v(" "),e("a",{staticClass:"btn",on:{click:function(e){t.showModal=!t.showModal}}},[t._v("Não")])])],2)])])}),[],!1,null,null,null);e.default=component.exports},826:function(t,e,n){"use strict";n(810)},827:function(t,e,n){var r=n(140)((function(i){return i[1]}));r.push([t.i,".table td[data-v-5be89f54],.table th[data-v-5be89f54]{padding:0.375rem}@media (min-width: 768px){.table td[data-v-5be89f54],.table th[data-v-5be89f54]{padding:1rem}}",""]),r.locals={},t.exports=r},862:function(t,e,n){var content=n(889);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(141).default)("572a50c4",content,!0,{sourceMap:!1})},888:function(t,e,n){"use strict";n(862)},889:function(t,e,n){var r=n(140)((function(i){return i[1]}));r.push([t.i,"input[type=file][data-v-6b50850b]{display:none}",""]),r.locals={},t.exports=r},941:function(t,e,n){"use strict";n.r(e);n(68),n(26),n(45),n(110),n(164),n(198),n(86);var r=n(5);n(153),n(93),n(184),n(87),n(143),n(17),n(40);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){d=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var c={name:"UploadFileComponent",props:{resource:{type:String,default:"dataset"},source:{type:String,default:"datasus"},system:{type:String,default:"sim"},initial:{type:String,default:"pi"}},data:function(){return{textFiles:"",files:[],filesProcessed:[]}},computed:{url:function(){return"v1/".concat(this.resource,"/").concat(this.source,"/").concat(this.system,"/").concat(this.initial)}},watch:{},mounted:function(){},methods:{changeFiles:function(t){if(this.files=Array.from(t.target.files),this.textFiles="",this.files.length>0){var e,n=o(this.files);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.textFiles=this.textFiles+" "+r.name}}catch(t){n.e(t)}finally{n.f()}}},removeFile:function(t){var e=this.filesProcessed.indexOf(t);this.filesProcessed.splice(e,1)},updateFiles:function(){var t=this;for(var e in this.filesProcessed=[],this.files)this.filesProcessed.push({index:e,dataset:this.files[e],status:1,progress:0});this.filesProcessed.forEach((function(e){t.updateFile(e)}))},updateFile:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(r=new FormData).append("datasets[]",t.dataset),n.next=5,e.$axios.$post("".concat(e.url),r,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data; boundary=".concat(r._boundary)},timeout:9999999,onUploadProgress:function(e){t.progress=Math.round(100*e.loaded/e.total),console.log("A imagem ".concat(t.dataset.name," está ").concat(t.progress,"% carregada... "))}});case 5:o=n.sent,e.removeFile(t),e.$toast.success("Arquivo ".concat(t.dataset.name," carregado!"),{timeout:3e4}),e.$emit("upload",t),console.log(o),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(0),e.removeFile(t),e.$toast.error("Ocorreu erro no carregamento do ".concat(t.dataset.name,"!"),{timeout:3e4}),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[0,12]])})))()}}},d=(n(888),n(195)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"card shadow-lg compact side bg-base-100 my-1"},[e("div",{staticClass:"flex-row items-center justify-center space-x-4 card-body"},[e("form",{staticClass:"w-full",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-control"},[e("label",{staticClass:"input-group",attrs:{for:"input-files"}},[e("span",{staticClass:"w-28"},[t._v("Arquivos:")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textFiles,expression:"textFiles"}],staticClass:"textarea w-full textarea-bordered",attrs:{for:"input-files",name:"text-files",placeholder:"Arquivos"},domProps:{value:t.textFiles},on:{click:function(e){return t.$refs.files.click()},input:function(e){e.target.composing||(t.textFiles=e.target.value)}}}),t._v(" "),e("input",{ref:"files",attrs:{id:"input-files",type:"file",name:"files",multiple:""},on:{change:t.changeFiles}})]),t._v(" "),t._m(0)]),t._v(" "),e("div",{staticClass:"justify-center card-actions"},[e("a",{staticClass:"btn btn-wide btn-primary",on:{click:t.updateFiles}},[t._v("\n            Enviar\n          ")])])])])]),t._v(" "),t._l(t.filesProcessed,(function(n,r){return e("div",{key:r},[e("div",{staticClass:"card shadow-lg compact side bg-base-100 my-2"},[e("div",{staticClass:"flex-row items-center space-x-4 card-body"},[e("div",{staticClass:"flex-1"},[e("span",[t._v("Upload do arquivo:")]),t._v(" "),e("progress",{staticClass:"progress progress-secondary",attrs:{max:"100"},domProps:{value:n.progress}}),t._v(" "),e("h3",{staticClass:"flex card-title"},[e("button",{staticClass:"btn btn-ghost btn-circle loading"}),t._v("\n            Processando os dados de: "+t._s(n.dataset.name)+"\n          ")])]),t._v(" "),e("div",{staticClass:"flex-0"},[e("button",{staticClass:"btn btn-ghost btn-circle",on:{click:function(e){return t.removeFile(n)}}},[e("fa-icon",{staticClass:"fa-3x",attrs:{icon:["far","times-circle"]}})],1)])])])])}))],2)}),[function(){var t=this._self._c;return t("label",{staticClass:"label"},[t("span",{staticClass:"label-text-alt text-error"})])}],!1,null,"6b50850b",null);e.default=component.exports}}]);