(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{862:function(t,e,r){var content=r(889);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(141).default)("572a50c4",content,!0,{sourceMap:!1})},888:function(t,e,r){"use strict";r(862)},889:function(t,e,r){var n=r(140)((function(i){return i[1]}));n.push([t.i,"input[type=file][data-v-6b50850b]{display:none}",""]),n.locals={},t.exports=n},941:function(t,e,r){"use strict";r.r(e);r(68),r(26),r(45),r(110),r(164),r(198),r(86);var n=r(5);r(153),r(93),r(184),r(87),r(143),r(17),r(40);function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){f=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(f)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var c={name:"UploadFileComponent",props:{resource:{type:String,default:"dataset"},source:{type:String,default:"datasus"},system:{type:String,default:"sim"},initial:{type:String,default:"pi"}},data:function(){return{textFiles:"",files:[],filesProcessed:[]}},computed:{url:function(){return"v1/".concat(this.resource,"/").concat(this.source,"/").concat(this.system,"/").concat(this.initial)}},watch:{},mounted:function(){},methods:{changeFiles:function(t){if(this.files=Array.from(t.target.files),this.textFiles="",this.files.length>0){var e,r=o(this.files);try{for(r.s();!(e=r.n()).done;){var n=e.value;this.textFiles=this.textFiles+" "+n.name}}catch(t){r.e(t)}finally{r.f()}}},removeFile:function(t){var e=this.filesProcessed.indexOf(t);this.filesProcessed.splice(e,1)},updateFiles:function(){var t=this;for(var e in this.filesProcessed=[],this.files)this.filesProcessed.push({index:e,dataset:this.files[e],status:1,progress:0});this.filesProcessed.forEach((function(e){t.updateFile(e)}))},updateFile:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(n=new FormData).append("datasets[]",t.dataset),r.next=5,e.$axios.$post("".concat(e.url),n,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data; boundary=".concat(n._boundary)},timeout:9999999,onUploadProgress:function(e){t.progress=Math.round(100*e.loaded/e.total),console.log("A imagem ".concat(t.dataset.name," est√° ").concat(t.progress,"% carregada... "))}});case 5:o=r.sent,e.removeFile(t),e.$toast.success("Arquivo ".concat(t.dataset.name," carregado!"),{timeout:3e4}),e.$emit("upload",t),console.log(o),r.next=17;break;case 12:r.prev=12,r.t0=r.catch(0),e.removeFile(t),e.$toast.error("Ocorreu erro no carregamento do ".concat(t.dataset.name,"!"),{timeout:3e4}),console.log(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,12]])})))()}}},f=(r(888),r(195)),component=Object(f.a)(c,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"card shadow-lg compact side bg-base-100 my-1"},[e("div",{staticClass:"flex-row items-center justify-center space-x-4 card-body"},[e("form",{staticClass:"w-full",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-control"},[e("label",{staticClass:"input-group",attrs:{for:"input-files"}},[e("span",{staticClass:"w-28"},[t._v("Arquivos:")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textFiles,expression:"textFiles"}],staticClass:"textarea w-full textarea-bordered",attrs:{for:"input-files",name:"text-files",placeholder:"Arquivos"},domProps:{value:t.textFiles},on:{click:function(e){return t.$refs.files.click()},input:function(e){e.target.composing||(t.textFiles=e.target.value)}}}),t._v(" "),e("input",{ref:"files",attrs:{id:"input-files",type:"file",name:"files",multiple:""},on:{change:t.changeFiles}})]),t._v(" "),t._m(0)]),t._v(" "),e("div",{staticClass:"justify-center card-actions"},[e("a",{staticClass:"btn btn-wide btn-primary",on:{click:t.updateFiles}},[t._v("\n            Enviar\n          ")])])])])]),t._v(" "),t._l(t.filesProcessed,(function(r,n){return e("div",{key:n},[e("div",{staticClass:"card shadow-lg compact side bg-base-100 my-2"},[e("div",{staticClass:"flex-row items-center space-x-4 card-body"},[e("div",{staticClass:"flex-1"},[e("span",[t._v("Upload do arquivo:")]),t._v(" "),e("progress",{staticClass:"progress progress-secondary",attrs:{max:"100"},domProps:{value:r.progress}}),t._v(" "),e("h3",{staticClass:"flex card-title"},[e("button",{staticClass:"btn btn-ghost btn-circle loading"}),t._v("\n            Processando os dados de: "+t._s(r.dataset.name)+"\n          ")])]),t._v(" "),e("div",{staticClass:"flex-0"},[e("button",{staticClass:"btn btn-ghost btn-circle",on:{click:function(e){return t.removeFile(r)}}},[e("fa-icon",{staticClass:"fa-3x",attrs:{icon:["far","times-circle"]}})],1)])])])])}))],2)}),[function(){var t=this._self._c;return t("label",{staticClass:"label"},[t("span",{staticClass:"label-text-alt text-error"})])}],!1,null,"6b50850b",null);e.default=component.exports}}]);