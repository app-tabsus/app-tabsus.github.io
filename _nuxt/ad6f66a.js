(window.webpackJsonp=window.webpackJsonp||[]).push([[58,12,13,14],{1009:function(e,t,n){"use strict";n.r(t);n(68);var r=n(5),o=(n(93),n(153),n(802)),c=n(850),l={name:"PainelSinascMaps",mixins:[o.a,c.a],data:function(){return{id:null,mapFeatures:[],loadMap:!0,featureType:"city",initial:null!==this.$store.state.sinasc.initial?this.$store.state.sinasc.initial:"pi",name:null!==this.$store.state.sinasc.locationName?this.$store.state.sinasc.locationName:"Piauí",locationName:null!==this.$store.state.sinasc.locationName?this.$store.state.sinasc.locationName:"Piauí",dataset:null,module:"sinasc",incidence:!1,scopeLocation:this.$store.state.sinasc.scopeLocation,optionsScopeLocation:[{name:"Município Residêntes",value:"codmunres"},{name:"Município Nascimento",value:"codmunnasc"}],urlBaseSerie:"v1/dataset/serie/datasus/sinasc/",urlBaseSerieRange:"v1/dataset/serie/range/datasus/sinasc/",urlSerie:"",urlSerieRange:"",occurrences:[],paramsByLocation:{per:this.$store.state.sinasc.scopeLocation,operation:"count",page:"1",rating:"contador",by_location_type:"city"}}},fetch:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},computed:{},watch:{mapFeatures:function(){},featureType:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadMap=!0,e.next=3,t.getFeatures(t.dataset,t.featureType);case 3:return t.paramsByLocation.by_location_type=t.featureType,e.next=6,t.getOccurrences(t.dataset);case 6:t.loadMap=!1;case 7:case"end":return e.stop()}}),e)})))()}},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.id=e.$route.params.id,t.next=3,e.$axios.get("v1/dataset/".concat(e.$route.params.id));case 3:return n=t.sent,e.urlSerie="".concat(e.urlBaseSerie).concat(n.data.initial),e.urlSerieRange="".concat(e.urlBaseSerieRange).concat(n.data.initial),e.initial=n.data.initial,t.next=9,n.data;case 9:return e.dataset=t.sent,t.next=12,e.getFeatures(e.dataset,e.featureType);case 12:case"end":return t.stop()}}),t)})))()},beforeMount:function(){},mounted:function(){},activated:function(){},updated:function(){},methods:{changeScopeLocation:function(e){this.loadMap=!0,this.scopeLocation=e,this.paramsByLocation.per=e,this.getOccurrences(this.dataset)},createdMap:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getOccurrences(e.dataset);case 2:e.loadMap=!1;case 3:case"end":return t.stop()}}),t)})))()}}},d=(n(968),n(195)),component=Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"map-container"},[t("Overlay",{attrs:{show:e.loadMap}},[t("div",{staticClass:"map-panel rounded-box border-base-200 bg-base-100"},[t("div",{staticClass:"collapse w-96 collapse-arrow border rounded-box border-base-300 bg-base-100"},[t("input",{attrs:{type:"checkbox"}}),e._v(" "),t("div",{staticClass:"collapse-title text-xl font-medium"},[e._v("\n          Controles\n          "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.loadMap,expression:"loadMap"}],staticClass:"btn btn-primary btn-outline btn-sm loading"},[e._v("\n            Carregando...\n          ")])]),e._v(" "),t("div",{staticClass:"collapse-content"},[t("div",{staticClass:"flex flex-col w-full rounded-box bg-base-100 py-1"},[t("div",{staticClass:"grid card bg-base-200 rounded-box mx-2 my-1"},[t("div",{staticClass:"form-control"},[t("label",{staticClass:"cursor-pointer label"},[t("span",{staticClass:"label-text"},[e._v("Cidades")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.featureType,expression:"featureType"}],staticClass:"radio radio-secondary",attrs:{type:"radio",value:"city"},domProps:{checked:e._q(e.featureType,"city")},on:{change:function(t){e.featureType="city"}}})]),e._v(" "),t("label",{staticClass:"cursor-pointer label"},[t("span",{staticClass:"label-text"},[e._v("Microgerações")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.featureType,expression:"featureType"}],staticClass:"radio radio-secondary",attrs:{type:"radio",value:"microregion"},domProps:{checked:e._q(e.featureType,"microregion")},on:{change:function(t){e.featureType="microregion"}}})]),e._v(" "),t("label",{staticClass:"cursor-pointer label"},[t("span",{staticClass:"label-text"},[e._v("Mesorregiões")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.featureType,expression:"featureType"}],staticClass:"radio radio-secondary",attrs:{type:"radio",value:"mesoregion"},domProps:{checked:e._q(e.featureType,"mesoregion")},on:{change:function(t){e.featureType="mesoregion"}}})])])]),e._v(" "),t("div",{staticClass:"grid card bg-base-200 rounded-box mx-2 my-1"},[t("div",{staticClass:"form-control"},[t("label",{staticClass:"cursor-pointer label"},[t("span",{staticClass:"label-text"},[e._v("Ocorrência")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.incidence,expression:"incidence"}],staticClass:"toggle toggle-primary",attrs:{type:"radio",name:"incidence",checked:"checked"},domProps:{value:!1,checked:e._q(e.incidence,!1)},on:{change:function(t){e.incidence=!1}}})])]),e._v(" "),t("div",{staticClass:"form-control"},[t("label",{staticClass:"cursor-pointer label"},[t("span",{staticClass:"label-text"},[e._v("Incidência")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.incidence,expression:"incidence"}],staticClass:"toggle toggle-primary",attrs:{type:"radio",name:"incidence",checked:"checked"},domProps:{value:!0,checked:e._q(e.incidence,!0)},on:{change:function(t){e.incidence=!0}}})])]),e._v(" "),e._l(e.optionsScopeLocation,(function(option){return t("div",{key:option.value,staticClass:"form-control"},[t("label",{staticClass:"cursor-pointer label"},[t("span",{staticClass:"label-text"},[e._v(e._s(option.name))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.scopeLocation,expression:"scopeLocation"}],staticClass:"toggle toggle-primary",attrs:{type:"radio",name:"scope"},domProps:{value:option.value,checked:e._q(e.scopeLocation,option.value)},on:{change:[function(t){e.scopeLocation=option.value},function(t){return e.changeScopeLocation(option.value)}]}})])])}))],2)])])])]),e._v(" "),t("client-only",[t("OlMap",{attrs:{"map-features":e.mapFeatures,occurrences:e.occurrences,incidence:e.incidence,"feature-type":e.featureType,zoom:6.5,"zoom-out":6},on:{"update:mapFeatures":function(t){e.mapFeatures=t},"update:map-features":function(t){e.mapFeatures=t},"update:occurrences":function(t){e.occurrences=t},"update:incidence":function(t){e.incidence=t},"update:featureType":function(t){e.featureType=t},"update:feature-type":function(t){e.featureType=t},"create-map":e.createdMap}})],1)],1)],1)}),[],!1,null,"71a50736",null);t.default=component.exports;installComponents(component,{OlMap:n(939).default,Overlay:n(801).default})},794:function(e,t,n){var content=n(800);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(141).default)("f9bdcf9e",content,!0,{sourceMap:!1})},799:function(e,t,n){"use strict";n(794)},800:function(e,t,n){var r=n(140)((function(i){return i[1]}));r.push([e.i,".overlay[data-v-395215aa]{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:50;display:flex;height:100vh;width:100%;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;--tw-bg-opacity:1;background-color:rgb(55 65 81 / var(--tw-bg-opacity));opacity:0.75}.overlay-content[data-v-395215aa]{position:absolute;z-index:50;display:flex;height:100%;width:100%;align-items:center;justify-content:center;background-color:rgb(55 65 81 / var(--tw-bg-opacity));--tw-bg-opacity:0.75}.loader[data-v-395215aa]{border-top-color:#3498db;animation:spinner-395215aa 1.5s linear infinite}@keyframes spinner-395215aa{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),r.locals={},e.exports=r},801:function(e,t,n){"use strict";n.r(t);var r={name:"OverlayComponent",props:{show:{type:Boolean,default:!1}}},o=(n(799),n(195)),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative"},[e.show?t("div",{staticClass:"overlay-content",attrs:{"wire:loading":""}},[t("div",{staticClass:"btn btn-primary btn-outline btn-lg loading"},[e._v("\n      Carregando...\n    ")])]):e._e(),e._v(" "),e._t("default")],2)}),[],!1,null,"395215aa",null);t.default=component.exports},802:function(e,t,n){"use strict";n(68);t.a={data:function(){return{}},methods:{setFiltersLocation:function(e,t){return null==this.$store.state[t].locationType?void 0!==e.location_type&&(delete e.scope_location,delete e.location_type,delete e.location_id):(e.scope_location=this.$store.state[t].scopeLocation,e.location_type=this.$store.state[t].locationType,e.location_id=this.$store.state[t].locationId),this.locationName=this.$store.state[t].locationName,e},setFiltersCids:function(e,t,n){return void 0!==e.column_filters&&(delete e.column_filters,delete e.term_filters),void 0!==e.column_filter_or&&(delete e.column_filter_or,delete e.term_filter_or_range),null!=this.$store.state[t].filter_cids&&(e.column_filters=n,e.term_filters=this.$store.state[t].filter_cids),null!=this.$store.state[t].filter_groups_cids&&(e.column_filter_or=[n],e.term_filter_or_range=this.$store.state[t].filter_groups_cids),null!=this.$store.state[t].filter_chapters_cids&&(e.column_filter_or=[n],e.term_filter_or_range=this.$store.state[t].filter_chapters_cids),e},resetFilters:function(e){this.$store.commit("".concat(this.module,"/setScopo"),{scopeLocation:e}),this.$store.commit("".concat(this.module,"/setLocation"),{locationType:null,locationId:null,locationName:this.locationName})},changeLocationFilter:function(e){this.name=e.locationName,this.locationName=e.locationName,this.$store.commit("".concat(this.module,"/setLocationName"),{locationName:e.locationName}),this.setAllFilters()}}}},833:function(e,t,n){var content=n(861);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(141).default)("0dee24ef",content,!0,{sourceMap:!1})},850:function(e,t,n){"use strict";n(26),n(17),n(184),n(87),n(45),n(110),n(164),n(198),n(86);var r=n(5);n(153),n(93),n(68);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){d=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}t.a={data:function(){return{}},methods:{getFeatures:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l,d,f,h,map;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.mapFeatures=[],r.next=3,n.$axios.get("v1/location/".concat(t,"/map/?initial=").concat(e.initial,"&year=").concat(e.year));case 3:c=r.sent,l=c.data,d=[],f=o(l);try{for(f.s();!(h=f.n()).done;)map=h.value,d.push({type:"Feature",id:map.id,ibge_id_short:map.ibge_id_short,ibge_id:map.ibge_id,geometry:JSON.parse(map.geojson),name:map.name,properties:{name:map.name,ibge_id_short:map.ibge_id_short,ibge_id:map.ibge_id,populations:map.populations,count:0,incidence:0}})}catch(e){f.e(e)}finally{f.f()}n.mapFeatures=[].concat(d);case 9:case"end":return r.stop()}}),r)})))()},getOccurrences:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c,l,d,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.get("v1/dataset/serie/".concat(e.source,"/").concat(e.system,"/").concat(e.initial,"/").concat(t.$route.params.id,"/"),{params:t.paramsByLocation});case 2:r=n.sent,c=[],l=o(r.data);try{for(l.s();!(d=l.n()).done;)f=d.value,c.push({ibge_id:f[t.scopeLocation],count:f.count})}catch(e){l.e(e)}finally{l.f()}t.occurrences=[].concat(c),t.loadMap=!1;case 8:case"end":return n.stop()}}),n)})))()}}}},859:function(e,t,n){var content=n(887);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(141).default)("78d4e694",content,!0,{sourceMap:!1})},860:function(e,t,n){"use strict";n(833)},861:function(e,t,n){var r=n(140)((function(i){return i[1]}));r.push([e.i,'.ol-popup[data-v-2689c761]{position:absolute;background-color:#fff;box-shadow:0 1px 4px rgba(0,0,0,.2);padding:15px;border-radius:10px;border:1px solid #ccc;bottom:12px;left:-50px;min-width:180px}.ol-popup[data-v-2689c761]:after,.ol-popup[data-v-2689c761]:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup[data-v-2689c761]:after{border-top-color:#fff;border-width:10px;left:48px;margin-left:-10px}.ol-popup[data-v-2689c761]:before{border-top-color:#ccc;border-width:11px;left:48px;margin-left:-11px}.ol-popup-closer[data-v-2689c761]{text-decoration:none;position:absolute;top:2px;right:8px}.ol-popup-closer[data-v-2689c761]:after{content:"✖"}',""]),r.locals={},e.exports=r},870:function(e,t,n){"use strict";n.r(t);n(68);var r={name:"OlPopover",props:{feature:{type:Object,required:!0}},methods:{close:function(e){e.target.blur(),this.$emit("close")}}},o=(n(860),n(195)),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"card bg-base-100 shadow-xl ol-popup"},[t("a",{staticClass:"ol-popup-closer",attrs:{id:"popup-closer"},on:{click:e.close}}),e._v(" "),e.feature.properties?t("div",{attrs:{id:"card-body popup-content"}},[e.feature.properties.name?t("h2",{staticClass:"card-title"},[e._v("\n      "+e._s(e.feature.properties.name)+"\n    ")]):e._e(),e._v(" "),e.feature.properties.name?t("p",[e._v("\n      "+e._s(e.feature.properties.name)+"\n    ")]):e._e(),e._v(" "),e.feature.properties.count?t("p",[e._v("\n      Ocorrência: "+e._s(e._f("locateNumber")(e.feature.properties.count))+"\n    ")]):e._e(),e._v(" "),e.feature.properties.incidence?t("p",[e._v("\n      Incidência: "+e._s(e._f("locateNumber")(e.feature.properties.incidence))+"\n    ")]):e._e(),e._v(" "),e.feature.properties.populations?t("p",[e._v("\n      População: "+e._s(e._f("locateNumber")(e.feature.properties.populations))+"\n    ")]):e._e(),e._v(" "),t("div",{staticClass:"card-actions justify-end"},[t("button",{staticClass:"btn btn-xs btn-primary",on:{click:e.close}},[e._v("fechar")])])]):e._e()])}),[],!1,null,"2689c761",null);t.default=component.exports},886:function(e,t,n){"use strict";n(859)},887:function(e,t,n){var r=n(140)((function(i){return i[1]}));r.push([e.i,".map[data-v-41a7d60f]{width:100%}",""]),r.locals={},e.exports=r},921:function(e,t,n){var content=n(969);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(141).default)("271afd90",content,!0,{sourceMap:!1})},939:function(e,t,n){"use strict";n.r(t);n(26),n(68),n(184),n(87),n(45),n(110),n(164),n(198),n(86);var r=n(70),o=(n(117),n(28),n(17),n(69),n(127),n(221),n(339),n(871)),c=n(864),l=n(943),d=n(938),f=n(893),h=n(937),m=n(872),v=n(926),y=n(995),_=n(793),w=(n(340),n(869),n(93),n(922)),x=n.n(w),C=n(821),S=n(844),M=n(824),O=n(825),P=n(843),T=n(817),$=n.n(T),F=n(8),k=(n(577),{props:{height:{type:String,default:"80"}},data:function(){return{styleList:[],styleText:new S.a({font:"12px Calibri,sans-serif",fill:new M.a({color:"#000"}),stroke:new O.a({color:"#fff",width:3})}),styleBase:new C.c({stroke:new O.a({color:$()("#ba68c8",.1),width:2}),fill:new M.a({color:"rgba(255,255,255,0.5)"}),text:new S.a({font:"12px Calibri,sans-serif",fill:new M.a({color:"#000"}),stroke:new O.a({color:"#fff",width:3})})}),colors:F.a.palette.sunSet,strokeBorder:new O.a({color:$()("#fff",.5),width:2}),legendControl:null,rangesCount:[],rangesIncidence:[],ranges:[]}},computed:{mapStyle:function(){return{height:"".concat(this.height,"vh")}},theme:function(){return this.$store.state.theme}},mounted:function(){},methods:{createStyle:function(){var style,e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.styleList.find((function(n){return n.name===e.theme&&n.over===t}));return void 0!==n?n.style:(style=t?new C.c({fill:new M.a({color:$()(x.a["[data-theme=".concat(this.theme,"]")].primary,.6)}),stroke:new O.a({color:$()(x.a["[data-theme=".concat(this.theme,"]")].primary,.9),width:.3}),text:this.styleText}):new C.c({fill:new M.a({color:$()(x.a["[data-theme=".concat(this.theme,"]")].primary,.2)}),stroke:new O.a({color:$()(x.a["[data-theme=".concat(this.theme,"]")].primary,.9),width:.3}),text:this.styleText}),this.styleList.push({name:this.theme,over:t,style:style}),style)},generateRangeClass:function(e){var t=this.$ss.max(e),n=this.$ss.min(e),r=[],o=Math.log10(t)-Math.log10(n);o<1&&(o+=1);for(var i=n;i<=t;i=Math.round(i*o,2))r.push([i,Math.round(i*o,2)]);return r},generateRangeIncidenceClass:function(e){for(var t=this.$ss.max(e),n=this.$ss.min(e),r=Math.log10(e.length),o=Math.round(1+3.3*r),c=[],i=n;i<=t;i+=Math.round(t/o))c.push([i,i+Math.round(t/o)]);return c},coloringMap:function(e,t){var n=this;if(null!=e){var o=this.fillGray;if(this.incidence){this.ranges=Object(r.a)(this.rangesIncidence);for(var i=0;i<this.rangesIncidence.length;i++)if(t.incidence>=this.rangesIncidence[i][0]&&t.incidence<=this.rangesIncidence[i][1]){o=new M.a({color:$()(this.colors[i],.7)});break}}else{this.ranges=Object(r.a)(this.rangesCount);for(var c=0;c<this.rangesCount.length;c++)if(t.count>=this.rangesCount[c][0]&&t.count<=this.rangesCount[c][1]){o=new M.a({color:$()(this.colors[c],.7)});break}}e.setProperties({count:t.count}),e.setProperties({incidence:t.incidence}),e.setStyle(new C.c({stroke:new O.a({color:$()("#ba68c8",.1),width:1}),fill:o,text:new S.a({text:e.getProperties().name,font:"12px Calibri,sans-serif",fill:new M.a({color:"#000"}),stroke:new O.a({color:"#fff",width:3})})}))}else setTimeout((function(){n.updateFeature(e,t)}),1e3)},setPrintMap:function(map){var e=n(940).default;e.prototype._labels.ptBR={title:"Imprimir",orientation:"Orientação",portrait:"Retrato",landscape:"Paisagem",size:"Tamanho da página",custom:"Tamanho da tela",margin:"Margem",scale:"Escala",legend:"Legenda",north:"Seta norte",mapTitle:"Título do mapa",saveas:"Salvar como...",saveLegend:"Salvar legenda...",copied:"✔ Copiado para a área de transferência",errorMsg:"Não é possível salvar a tela do mapa...",printBt:"Imprimir...",cancel:"Cancelar"};var t=new e({lang:"ptBR"});map.addControl(t)},updatedLegend:function(e,map){var t=this,r=n(873).default,o=n(868).default;if(null!==map){var legend=new r({title:this.incidence?"Incidência":"Ocorrência",margin:5});null!=this.legendControl&&map.removeControl(this.legendControl),this.legendControl=new o({legend:legend,collapsed:!1}),map.addControl(this.legendControl);for(var i=0;i<e.length;i++)legend.addItem({title:"".concat(e[i][0]," - ").concat(e[i][1]),typeGeom:"Point",style:new C.c({image:new P.a({points:4,radius:15,angle:Math.PI/4,stroke:new O.a({color:$()("#ba68c8",.1),width:1}),fill:new M.a({color:$()(this.colors[i],.7)})})})})}else setTimeout((function(){t.updatedRanges(e,map)}),2e3)}}});n(578);function N(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var j={name:"OlMap",mixins:[k],props:{mapFeatures:{type:Array,required:!0},featureType:{type:String,required:!0},occurrences:{type:Array,required:!0},incidence:{type:Boolean,required:!0},zoom:{type:Number,default:4},zoomOut:{type:Number,default:0}},data:function(){return{source:null,vector:null,tileOSM:null,map:null,features:[],featuresHover:[],showPopover:!1,selectedfeature:null,featureSelected:{},overlayPopup:null}},watch:{mapFeatures:function(e){this.map.getView().setZoom(this.zoom),this.features=Object(r.a)(e),this.updateFeatures(this.features)},occurrences:function(e){this.map.getView().setZoom(this.zoom),this.updatedOccurrences(e)},ranges:function(e){this.updatedLegend(e,this.map)},incidence:function(){this.updateFeature(this.occurrences)}},mounted:function(){this.initiateMap()},methods:{initiateMap:function(){var e=this,t=this.styleBase;this.source=new o.a({features:this.features,style:t}),this.vector=new c.a({source:this.source,style:function(e){return t.getText().setText(e.get("name").toString()),t},wrapX:!1}),this.sourceHover=new o.a({features:this.featuresHover,style:t}),this.vectorHover=new c.a({source:this.sourceHover,style:function(e){return t.getText().setText(e.get("name").toString()),t},wrapX:!1}),this.tileOSM=new l.a({source:new d.a}),this.map=new h.a({target:this.$refs.map,layers:[this.tileOSM,this.vector,this.vectorHover],view:new f.a({projection:"EPSG:4326",center:[-69.6689969,-13.7049651],zoom:this.zoom})});var n=null;this.map.on("pointermove",(function(t){if(e.sourceHover.clear(),null!==n&&(n=null),e.map.forEachFeatureAtPixel(t.pixel,(function(e){return n=e,!0})),n){var r=n.clone();r.setStyle(e.styleBase.clone()),r.getStyle().getText().setText(n.get("name").toString()),e.sourceHover.addFeature(r)}})),this.source.on("addfeature",(function(){e.add||(e.$emit("featuresload",!1),e.map.getView().fit(e.features[0].getGeometry()),e.map.getView().animate({zoom:e.map.getView().getZoom()-e.zoomOut}))})),this.map.on("loadend",this.loadend),this.overlayPopup=new v.a({element:this.$refs.popover.$el}),this.map.addOverlay(this.overlayPopup),this.selectedfeature=new y.a({wrapX:!1,style:this.styleBase.clone().getText().setText("Select")}),this.selectedfeature.on("select",(function(t){if(e.showPopover=!1,t.selected.length>0){e.featureSelected=(new m.a).writeFeatureObject(t.selected[0]);var n=t.selected[0].getGeometry().getExtent();e.overlayPopup.setPosition(Object(_.w)(n)),e.$emit("selectedFeature",t.selected[0]),e.showPopover=!0}})),this.map.addInteraction(this.selectedfeature),this.setPrintMap(this.map)},resize:function(){var e=this;setTimeout((function(){e.map.updateSize()}),500)},updateFeatures:function(e){null!==this.source&&this.source.clear();var t={type:"FeatureCollection",name:this.featureType,crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},features:e};this.features=(new m.a).readFeatures(t),this.source.addFeatures(this.features)},updateFeature:function(e){var t,n=null,r=N(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;null!==(n=this.findFeature(o))&&this.coloringMap(n,o)}}catch(e){r.e(e)}finally{r.f()}},findFeature:function(e){return 6===e.ibge_id.toString().length?this.source.forEachFeature((function(t){if(t.getProperties().ibge_id_short===e.ibge_id)return t})):this.source.forEachFeature((function(t){if(t.getProperties().ibge_id===e.ibge_id)return t}))},updatedOccurrences:function(e){var t=this;try{var n=null,r=[],o=[];this.source.forEachFeature((function(e){e.setStyle(t.styleBase),e.getStyle().fill=t.styleBase.fill,e.getStyle().stroke=t.styleBase.stroke,e.setProperties({count:0}),e.setProperties({incidence:0})}));for(var c=0;c<e.length;c++){var l=e[c];null!==(n=this.findFeature(l))&&(n.getProperties().count=l.count,l.incidence=parseFloat((l.count/n.getProperties().populations*1e5).toFixed(2)),n.getProperties().incidence=l.incidence,l.count>0&&(r.push(l.count),o.push(l.incidence))),e.length-1===c&&(this.rangesCount=this.generateRangeClass(r),this.rangesIncidence=this.generateRangeIncidenceClass(o),this.updateFeature(e))}}catch(e){this.$forceUpdate()}},closerPopover:function(){return this.overlayPopup.setPosition(void 0),this.showPopover=!1,this.featureSelected={},!1},loadend:function(){new ResizeObserver(this.resize).observe(this.$refs.container),this.$emit("create-map",this.map),this.map.un("loadend",this.loadend)}}},R=(n(886),n(195)),component=Object(R.a)(j,(function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("div",{ref:"map",staticClass:"map",style:e.mapStyle,on:{resize:e.resize}}),e._v(" "),t("OlPopover",{directives:[{name:"show",rawName:"v-show",value:e.showPopover,expression:"showPopover"}],ref:"popover",attrs:{id:"popover",feature:e.featureSelected},on:{close:e.closerPopover}})],1)}),[],!1,null,"41a7d60f",null);t.default=component.exports;installComponents(component,{OlPopover:n(870).default})},968:function(e,t,n){"use strict";n(921)},969:function(e,t,n){var r=n(140)((function(i){return i[1]}));r.push([e.i,".map-container[data-v-71a50736]{position:relative;width:100%;height:100%}.map-panel[data-v-71a50736]{position:absolute;top:10px;right:40px;max-height:500px;width:22em;z-index:1000}",""]),r.locals={},e.exports=r}}]);